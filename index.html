<!DOCTYPE html>
<html>
  <head>
    <title>Clocks</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
      * {
        box-sizing: border-box;
      }

      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "DM Mono", monospace;
        font-optical-sizing: auto;
        font-weight: normal;
        font-style: normal;
        font-size: 9.5vmin;
        line-height: 9.5vmin;
        color: #2f2f3f;
        background-color: #101020;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      main {
        max-height: 90vh;
        max-width: 90vw;
        text-align: justify;
        margin: auto;
      }

      .clock-text.active {
        color: #efefff;
      }



    </style>
  </head>
  <body>
    <main>
      <span data-target="it-is" class="clock-text active">IT IS</span>
      <span data-target="half" class="clock-text">HALF</span>
      <span data-target="ten" class="clock-text">TEN</span>
      <span data-target="quarter" class="clock-text">QUARTER</span>
      <span data-target="twenty" class="clock-text">TWENTY</span>
      <span data-target="five" class="clock-text">FIVE</span>
      <span data-target="minutes" class="clock-text">MINUTES</span>
      <span data-target="to" class="clock-text">TO</span>
      <span data-target="past" class="clock-text">PAST</span>
      <span data-target="one" class="clock-text">ONE</span>
      <span data-target="two" class="clock-text">TWO</span>
      <span data-target="three" class="clock-text">THREE</span>
      <span data-target="four" class="clock-text">FOUR</span>
      <span data-target="five" class="clock-text">FIVE</span>
      <span data-target="six" class="clock-text">SIX</span>
      <span data-target="seven" class="clock-text">SEVEN</span>
      <span data-target="eight" class="clock-text">EIGHT</span>
      <span data-target="nine" class="clock-text">NINE</span>
      <span data-target="ten" class="clock-text">TEN</span>
      <span data-target="eleven" class="clock-text">ELEVEN</span>
      <span data-target="noon" class="clock-text">NOON</span>
      <span data-target="midnight" class="clock-text">MIDNIGHT</span>
      <span data-target="o-clock" class="clock-text">O'CLOCK</span>
    </main>
    <footer>
    </footer>
    <script>
      window.addEventListener(
        "load",
        () => { initClock() },
        false
      );

      const initClock = () => {
        updateClock();
      }

      const updateClock = () => {
        const currentDate = new Date();
        let currentHour = currentDate.getHours();
        let currentMinute = currentDate.getMinutes();

        let targets = [];
        let texts = document.querySelectorAll('.clock-text');

        texts.forEach(text => {
          text.classList.remove('active');
        });

        let activations = ["it-is"];
        document.querySelector(`[data-target="it-is"]`).classList.add('active');

        let direction =["past"];

        // minutes
        if (currentMinute >= 33) {
          currentMinute = 60 - currentMinute;
          currentHour += 1;
          direction = ["to"];

          if (currentHour > 23) {
            currentHour = 0;
          }
        }

        currentMinute = Math.round(currentMinute / 5) * 5;

        if (currentMinute == 0) {
          direction = [];
        }

        const minuteTargets = minutes[currentMinute];

        activations = [...activations, ...minuteTargets, ...direction]

        // hour
        const hourTarget = hours[currentHour];

        if (currentHour != 0 || currentHour != 12) {
          activations = [...activations, "o-clock"];
        }

        activations = [...activations, hourTarget];

        activations.forEach(target => {
          document.querySelector(`[data-target="${target}"]`).classList.add('active');
        });

        setTimeout(function () {
          updateClock();
        }, 1000);
      }

      const minutes = {
        0: [],
        5: ["five", "minutes"],
        10: ["ten", "minutes"],
        15: ["quarter"],
        20: ["twenty", "minutes"],
        25: ["twenty", "five", "minutes"],
        30: ["half"],
      }

      const hours = {
        0: "midnight",
        1: "one",
        2: "two",
        3: "three",
        4: "four",
        5: "five",
        6: "six",
        7: "seven",
        8: "eight",
        9: "nine",
        10: "ten",
        11: "eleven",
        12: "noon",
        13: "one",
        14: "two",
        15: "three",
        16: "four",
        17: "five",
        18: "six",
        19: "seven",
        20: "eight",
        21: "nine",
        22: "ten",
        23: "eleven",
      }
    </script>
  </body>
</html>
